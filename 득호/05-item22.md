## 인터페이스는 타입을 정의하는 용도로만 사용하라

인터페이스는 자신을 구현한 클래스의 인스턴스를 참조할 수 있는 타입 역할을 한다. 어떤 인터페이스를 구현한다는 것은 자신의 인스턴스로 무엇을 할 수 있는지를 클라이언트에 얘기해주는 것이다. **오직 이 용도로만 사용해야한다**

→ 인스턴스를 어떻게 사용할 수 있는지 설명서 역할을 한다라고 이해된다.

이 지침에 맞지 않는 예로 소위 상수 인터페이스라는 것이 있다.

? ? ? 상수 인터페이스란 ? ? ?

메서드 없이 상수를 뜻하는 `static final` 필드로만 가득 찬 인터페이스를 말한다.

### 상수 인터페이스 안티 패턴  - 사용 금지!

```java
public interface PhysicalConstants {
	
	// 아보가드로 수 
	static final dobule AVOFADROS_NUMBER = 6.022_140_857e23;
	
	// 전자 질량 (kg)
	static final double ELECTRON_MASS = 9.109_~;
}
```

위 처럼 상수 인터페이스 안티패턴은 인터페이스를 잘못 사용한 예라고 한다.

→ 인터페이스의 본질은 “클래스는 무엇을 할 수 있다”를 정의하는 명세서이고 무엇을 어떠한 변수, 상수를 사용해서 처리하는지는 까지는 나타낼 필요가 없다.

**→ 사용자에게 혼란을 주고, 바이너리 호환성 때문에 계속 달고 다녀야한다?! 는 무슨 의미일까?**

LoginService를 만드는데 TIMEOUT 시간이 필요해서 ServerConstants 라는 인터페이스를 구현했다.

```java
// v1.0
public class LoginService implements ServerConstants {
    // ServerConstants.TIMEOUT (30초)을 갖다 씀
    public void login() { ... }
}
```

그리고 이 LoginService를 사용하는 다른 클라이언트가 우연히 코드를 아래와 같이 작성한다.

```java
int myTimeout = LoginService.TIMEOUT;
```

TIMEOUT은 사실 `ServerConstants`  의 것 인데 이를 구현한 `LoignServce.TIMEOUT` 를 사용하는 코드를 작성했고 강하게 결합되는 상황이 발생한다.

이러한 상태에서 이후 LoingService는 TIMEOUT 상수가 필요 없어져 implements 구문을 제거하고 싶지만 `LoignServce.TIMEOUT`  를 사용하는 클라이언트 코드가 존재하기에 오류 발생을 야기하게 된다.

### 그러면 어떻게 해야할까?

1. 특정 클래스나 인터페이스와 강하게 연관된 상수라면 그 클래스나 인터페이스 자체에 추가해야 한다.

    ```java
    // Java의 실제 Integer 클래스 
    public class Integer {
        public static final int MIN_VALUE = 0x80000000;
      
        public static final int MAX_VALUE = 0x7fffffff;
    }
    ```

   `Integer` 클래스의 MIN_VALUE와 MAX_VALUE가 특정 클래스와 강하게 연관된 상수를 잘 표현하는 예시이다.

2. 유틸리티 클래스 사용

    ```java
    public final class MyConstants {
        private MyConstants() {} // 인스턴스화 방지
        public static final double PI = 3.14159;
    }
    // 사용: MyConstants.PI
    ```

    - 상수만 모아둔 클래스를 만들고 final 키워드를 사용해 상속을 금지시킨다.
    - `private` 키워드로 생성자를 막아 인스턴스화를 막는다. (상수는 인스턴스가 필요 없다.)

        ```java
        // private 생성자가 없다면?
        MyConstants c = new MyConstants(); // 불필요한 객체 생성 가능 (메모리 낭비)
        double pi = c.PI; // 이렇게 접근하는 건 권장되지 않음 (static은 클래스 이름으로 접근해야 함)
        ```

3. Enum 사용

   서로 연관된 상수라면 Enum 사용하기

    ```java
    public enum Planet {
        MERCURY(3.302e+23, 2.439e6),
        VENUS(4.869e+24, 6.052e6);
        // ...
    }
    ```

4. Spring Boot 환경이라면?

   설정 값과 같은 상수는 application.yml 파일로 분리하고 이를 `@Value` 나 `@ConfigurationProperties` 로 주입 받아 사용할 수 있다.


### 결론

인터페이스는 타입을 정의하는 용도로만 사용해야 한다. 상수 공개용 수단으로 사용하지 말자