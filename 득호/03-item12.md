## 12. toString을 항상 재정의하라

Object의 기본 toString 메서드를 재정하지 않고 사용하는 경우 단순히 `클래스_이름@16진수로_표시한_해시코드` 를 반환한다. 이러한 정보는 사용자여로 하여금 해달 클래스, 객체가 뭘 의미하는지 이해할 수없다.

- toString 의 일반 규약
    - `toString()` 의 목적은 ‘간결하면서 사람이 읽기 쉬운 형태의 유익한 정보’ 를 반환해야 한다.
    - 모든 하위 클래스에서 이 메서드를 재정의하라

사실 toString을 재정의하지 않았다는 이유로 심각한 오류를 발생 시키는 경우는 존재하지 않는다.

하지만 문제가 발생했을 때 문제를 인식하고 해결하는데 도움된다.

내가 직접 toString을 호출하지 않더라고 `println`, `assert`  등 특정 자주 사용되는 구문에 넘길 때, 혹은 디버거가 객체를 출력할 때 자동으로 불리기 때문이다.

### 그러면 toString을 어떻게 재정의하면 좋을까?

toString을 구현할 때 반환값의 포맷을 문서화할지 정하자

책에서는 전화번호나 행렬 같은 `값 클래스` (VO) 라면 문서화하기를 권한다.

- 문서화 장점
    - 포맷을 명시하면 그 객체는 표준적으로, 명확하고, 사람이 읽을 수 있게 된다.
    - 명시한 포맷에 맞는 문자열과 객체를 상호 전환할 수 있는 정적 팩터리 활용 가능

    <aside>

  toString을 문선화하여 규약을 정한다면
  해당 정보를 활용해서 역직렬화 과정을 수행할 수 있다.

    </aside>

- 문서화 단점
    - 포맷을 한번 명시하면 해당 포맷에 얽매이게 된다. (유연성이 떨어진다)

      향후 릴리스에서 포맷을 바꾼다면 이를 사용하던 코드들과 데이터들에 영향을 주기 때문에 함부로 변경할 수 없는 높은 결합도를 만든다.


**포맷을 명시하든 아니든 의도는 명확히 밝혀야 한다.**

```java
/**
     * 이 Order 객체의 상태를 설명하는 문자열을 반환합니다.
     * * 이 메서드는 오직 디버깅/로깅 용도로만 사용됩니다.
     * **포맷 변경의 위험을 감수하고 데이터 교환 목적으로 사용해서는 안 됩니다.**
     * * @return 객체 상태를 나타내는 문자열
     */
    @Override
    public String toString() {
        // 필드명 변경이나 추가 정보가 필요할 때 포맷을 쉽게 변경할 수 있습니다.
        return "Order{" +
               "orderId=" + orderId +
               ", name='" + productName + '\'' +
               ", qty=" + quantity +
               '}';
    }
```

**toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하자**

정보를 얻어올 수 있는 API를 제공하지 않는다면 toString의 값을 파싱해서 사용하기 때문에 성능이 나빠지고, 필요하지도 않은 작업을 수행해야 한다.

추가적으로 향후 포맷이 변경되는 경우 시스템이 망가지는 결과를 초래할 수 있다.

```java
/**
     * 주문의 고유 식별자(ID)를 반환합니다.
     * @return 주문 ID
     */
    public long getOrderId() {
        return this.orderId;
    }

    /**
     * 주문된 제품의 이름을 반환합니다.
     * @return 제품 이름
     */
    public String getProductName() {
        return this.productName;
    }

    /**
     * 주문 수량을 반환합니다.
     * @return 수량
     */
    public int getQuantity() {
        return this.quantity;
    }
```

정적 유틸리티 클래스는 toString을 제공할 이유가 없다. 또한, 대부분의 열거 타입도 자바가 이미 완벽한 toString을 제공하니 따로 재정의하지 않아도 된다.

하지만 하위 클래시들이 공유해야 할 문자열 표현이 있는 추상 클래스라면 toString을 재정의해줘야 한다.

### 정리

모든 구체 클래스에서 Object의 toString을 재정의하자.
상위 클래스에서 이미 알맞은 재정의한 경우는 예외다.
toString을 재정의한 클래스는 사용하기도 즐겁고 디버깅하기 쉽게 해준다.